<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <title>Iniciar Sesión</title>
</head>
<body>
    <div class="d-flex justify-content-center align-items-center vh-100">
        <div class="w-100 p-4 bg-white border border-gray-200 rounded-lg shadow">
            <div class="mb-4 text-center">
                <h5 class="font-weight-bold">Inicia Sesión en nuestra plataforma</h5>
            </div>
            <form id="login">
                <div class="form-group">
                    <label for="emailLogin" class="font-weight-bold">Tu correo electrónico</label>
                    <input id="emailLogin" type="email" placeholder="Email" class="form-control" required>
                </div>

                <div class="form-group mt-3">
                    <label for="passwordLogin" class="font-weight-bold">Tu contraseña</label>
                    <input id="passwordLogin" type="password" placeholder="Password" class="form-control" required>
                </div>

                <button id="submit" class="btn btn-primary w-100 mt-4">Iniciar sesión con tu cuenta</button>

                <div class="text-center mt-3">
                    ¿Aún no estás registrado? <a href="./signup.html" class="text-danger">Crear cuenta</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Scripts de JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script type="module" > import {
        initializeApp
      } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
      import {createUserWithEmailAndPassword,
        getAuth,
        signInWithEmailAndPassword
      } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
      
      const firebaseConfig = {
        apiKey: "AIzaSyBzwNN5z43ihHxU5SqAGT9sT9ktl4uf9hA",
        authDomain: "api-crud-php.firebaseapp.com",
        projectId: "api-crud-php",
        storageBucket: "api-crud-php.appspot.com",
        messagingSenderId: "1032822382295",
        appId: "1:1032822382295:web:aceefeb3f87c1ee7931a92",
        measurementId: "G-J0MJ01TF95"
      };
      
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      
      $('#login').submit(function(event) {
        event.preventDefault();
        var email = document.getElementById("emailLogin").value;
        var password = document.getElementById("passwordLogin").value;
      
        signInWithEmailAndPassword(auth, email, password)
            .then(() => {
                alert("¡Bienvenido de nuevo " + email + "!");
                setTimeout(function() {
                    window.location.href = "sesion.php";
                }, 2000);
            })
            .catch(() => {
                alert("Alguno de los datos es incorrecto");
            });
      });
      
       </script>
</body>
</html>
